<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <script type="application/javascript">
    const canvas_size = 500;
    const cell_size = 20;

    function draw() {
      var canvas = document.getElementById('canvas');
      if (canvas.getContext) {
        var ctx = canvas.getContext('2d');

        prepare_grid(ctx);

        //draw vectors
        var a = {};
        a.x = Number(document.getElementById('A-X').value);
        a.y = Number(document.getElementById('A-Y').value);
        draw_vector(ctx, "#ed5160", a.x, a.y, 3);

        var b = {};
        b.x = Number(document.getElementById('B-X').value);
        b.y = Number(document.getElementById('B-Y').value);
        draw_vector(ctx, "#5f64ed", b.x, b.y, 3);

        var show_sum = document.getElementById('sum').checked;
        if (show_sum == true)
        {
          var sum = {};
          sum.x = a.x + b.x;
          sum.y = a.y + b.y;
          draw_vector(ctx, "#e8b7e3", sum.x, sum.y, 3);
          var show_sum_hint = document.getElementById('sum-hint').checked;
          if (show_sum_hint == true)
          {
            draw_arrow_local(ctx, "#5f64ed50", a.x, a.y, sum.x, sum.y, 3);
          }
        }

        var show_sub = document.getElementById('sub').checked;
        if (show_sub == true)
        {
          var sub = {};
          sub.x = a.x - b.x;
          sub.y = a.y - b.y;
          draw_vector(ctx, "#617863", sub.x, sub.y, 3);
          var show_sub_hint = document.getElementById('sub-hint').checked;
          if (show_sub_hint == true)
          {
            draw_arrow_local(ctx, "#61786350", b.x, b.y, a.x, a.y, 3);
          }
        }

        var show_normal_a = document.getElementById('normal-a').checked;
        if (show_normal_a == true)
        {
          var normalA = {};
          normalA.x = -a.y;
          normalA.y = a.x;

          draw_vector(ctx, "#91aeb3", normalA.x, normalA.y, 3);
        }
        var show_normal_b = document.getElementById('normal-b').checked;
        if (show_normal_b == true)
        {
          var normalB = {};
          normalB.x = -b.y;
          normalB.y = b.x;

          draw_vector(ctx, "#91aeb3", normalB.x, normalB.y, 3);
        }

        var dot_product_label = document.getElementById('dot-product-label');
        dot_product_label.textContent = "Dot Product: " + (a.x*b.x + a.y*b.y);
        var normalisedA = normalize(a.x, a.y);
        var normalisedB = normalize(b.x, b.y);
        var dot_product_label = document.getElementById('dot-product-label-normalised');
        dot_product_label.textContent = "Dot Product of normalised vectors: " + (normalisedA.x*normalisedB.x + normalisedA.y*normalisedB.y).toFixed(3);
      }
    }

    function prepare_grid(ctx)
    {
      //draw bg
      draw_rect(ctx, '#493c4f', 0,0,canvas_size,canvas_size);

      //draw grid
      for (var i = cell_size/2; i < canvas_size; i += cell_size)
      {
        draw_line(ctx, '#3d3242', 0, i, canvas_size, i);
        draw_line(ctx, '#3d3242', i, 0, i, canvas_size);
      }

      //horisontal
      draw_line(ctx, 'black', 0, canvas_size/2, canvas_size, canvas_size/2);
      //vectical
      draw_line(ctx, 'black', canvas_size/2, 0, canvas_size/2, canvas_size);
    }

    function draw_vector(context, color, x, y, width) 
    {
      draw_arrow_local(context, color, 0, 0, x, y, width);
    }

    function draw_arrow_local(context, color, fromx, fromy, tox, toy, width = 1, arrow_size = 20.0) {
      var center = canvas_size/2;
      draw_arrow(context, color,
        center + fromx * cell_size,
        center - fromy * cell_size,
        center + tox * cell_size,
        center - toy * cell_size,
        width, arrow_size);
    }

    function draw_rect(context, color, x, y, width, height) {
      context.fillStyle = color;
      context.fillRect(x, y, width, height);
    }

    function draw_line(context, color, fromx, fromy, tox, toy, width = 1)
    {
      context.beginPath();

      context.lineWidth = width;
      context.strokeStyle = color;

      context.moveTo(fromx, fromy);
      context.lineTo(tox, toy);
      context.stroke();
    }

    function draw_arrow(context, color, fromx, fromy, tox, toy, width = 1, arrow_size = 20.0) {

      var dx = tox - fromx;
      var dy = toy - fromy;
      var angle = Math.atan2(dy, dx);
      var normal = normalize(dx, dy);

      draw_line(context, color, fromx, fromy, tox - normal.x * (arrow_size -1), toy - normal.y * (arrow_size-1), width);

      context.fillStyle = color;

      var middleX = tox - normal.x * arrow_size;
      var middleY = toy - normal.y * arrow_size;
      draw_arrow_head(context, middleX, middleY, tox, toy);
    }

    function magnitude(x, y) 
    {
      return Math.sqrt(x*x + y*y);
    }

    function normalize(x, y)
    {
      var mag = magnitude(x,y);
      var result = {};
      result.x = x / mag;
      result.y = y / mag;
      return result
    }

    function draw_arrow_head(context, x1, y1, x2, y2) {
      var dx = x2 - x1;
      var dy = y2 - y1;
      context.beginPath();
      context.moveTo(x1 + 0.5 * dy, y1 - 0.5 * dx); // https://dirask.com/posts/jMqM0j
      context.lineTo(x1 - 0.5 * dy, y1 + 0.5 * dx); // https://dirask.com/posts/1GoW61
      context.lineTo(x2, y2);
      context.closePath();
      context.fill();
    }
  </script>
	<style>
    h1 
    {
      text-align: center;
      padding-bottom: 20px;
      color: white;
    }
    h2 {
      margin-bottom: 5px;
      margin-top: 15px;
    }
    p, label
    {
      margin-top: 0px;
      color: white;
      margin-bottom: 5px;
    }
    input
    {
      padding-top: 0px;
      margin-top: 0px;
      margin-bottom: 10px;
    }
    canvas {text-align: center;}
    body {background-color:#262424}

    .a {color:#ed5160}
    .b {color:#5f64ed}
    .sum {color:#e8b7e3}
    .sub {color:#b7b9e8}
    .normal {color:#91aeb3}
    .dot-product {color:#91aeb3}
    .cross-product {color:#91aeb3}
    
    section
    {
      margin-left: 5%;
    }
    .left
    {
      float: left;
      text-align: left;
      padding-right: 5%;
      width: 28%;
    }
    .right
    {
      float: left;
      text-align: center;
      width: 100%-33%;
    }
    .bottom
    {
      float: left;
      width: 100%;
    }
    .bottom-part
    {
      float: left;
      width: 33%;
    }
	</style>
 </head>
 <body onload="draw();">
  <header>
    <h1>VECTOR VISUALISER</h1>
  </header>

  <section>
    <div>
      <div class="left">
        <div>
          <h2 class="a">Vextor A</h2>
          <input type="number" id="A-X" value="-6" onchange="draw()">
          <input type="number" id="A-Y" value="2" onchange="draw()">
        </div>
        <div>
          <h2 class="b">Vextor B</h2>
          <input type="number" id="B-X" value="5" onchange="draw()">
          <input type="number" id="B-Y" value="7" onchange="draw()">
        </div>
        <div>
          <h2 class="sum">A + B</h2>
          <p>x = a.x + b.x<br>y = a.y + b.y</p>
          <input type="checkbox" id="sum" onchange="draw()">
          <label for="sum">Visualise Vector</label>
          <p>Hint: Put the A vector at the end of the B vector. The finish point will be the end of the vector A+B</p>
          <input type="checkbox" id="sum-hint" onchange="draw()">
          <label for="sum-hint">Visualise Hint</label>
        </div>
        <div>
          <h2 class="sub">A - B</h2>
          <p>x = a.x - b.x<br>y = a.y - b.y</p>
          <input type="checkbox" id="sub" onchange="draw()">
          <label for="sub">Visualise Vector</label>
          <p>Hint: Draw a line from the end of the B vector to the end of A vector. Move it to the origin.</p>
          <input type="checkbox" id="sub-hint" onchange="draw()">
          <label for="sub-hint">Visualise Hint</label>
        </div>
      </div>
      <div class="right">
        <canvas id="canvas" width="500" height="500"></canvas>
      </div>  
    </div>
    <div class="bottom">
      <div class="bottom-part"> 
        <h2 class="normal">Normal</h2>
        <p>x = -y<br>y = x</p>
        <input type="checkbox" id="normal-a" onchange="draw()">
        <label for="normal-a">Visualise Normal A</label><br>
        <input type="checkbox" id="normal-b" onchange="draw()">
        <label for="normal-b">Visualise Normal B</label>
        <p>Hint: Normal is a vector at 90 degrees to another vector.</p>
      </div>
      <div class="bottom-part">
        <h2 class="cross-product">Cross Product</h2>
        <p>x = a.y * b.z - a.z * b.y</p>
        <p>y = a.z * b.x - a.x * b.z</p>
        <p>z = a.x * b.y - a.y * b.x</p>
        <p>Hint: Cross Product in 3D returns a perpendicular vector in relation to the two input vectors. Magnitude of the cross product vector is equal to the area of the parallelogram between the two vectors.</p><p><b>You can't apply a cross product to vectors in 2D space.</b></p>
      </div>
      <div class="bottom-part">
        <h2 class="dot-product">Dot Product</h2>
        <p>a * b = a.x * b.x + a.y * b.y</p>
        <b><p id="dot-product-label">Value</p></b>
        <p>Hint: Dot (scalar) product A*B is the product of the length of the projection of the vector A on the B and the length of the B.<br>Most often used to check the co-direction of vectors. If the value > 0 – the vectors look in the same direction. If less – in different. If equal to 0 – rotated by 90 degrees. If the vectors before the product are normalized, the values will become from -1 to 1, where 1 – the vectors are directed in the same way, -1 – they are turned in strictly different directions.</p>
        <b><p id="dot-product-label-normalised">Value</p></b>
      </div>

    </div>
  </section>
    </body>
</html>
