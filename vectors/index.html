<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <script type="application/javascript">
    const canvas_size = 600;
    const cell_size = 20;

    function draw() {
      var canvas = document.getElementById('canvas');
      if (canvas.getContext) {
        var ctx = canvas.getContext('2d');

        prepare_grid(ctx);

        //draw vectors
        var x_x = document.getElementById('X-X').value;
        var x_y = document.getElementById('X-Y').value;
        draw_vector(ctx, "#ed5160", x_x, x_y, 3);

        var y_x = document.getElementById('Y-X').value;
        var y_y = document.getElementById('Y-Y').value;
        draw_vector(ctx, "#5055eb", y_x, y_y, 3);
      }
    }

    function prepare_grid(ctx)
    {
      //draw bg
      draw_rect(ctx, '#493c4f', 0,0,canvas_size,canvas_size);

      //draw grid
      for (var i = 0; i < canvas_size; i += cell_size)
      {
        draw_line(ctx, '#3d3242', 0, i, canvas_size, i);
        draw_line(ctx, '#3d3242', i, 0, i, canvas_size);
      }

      //horisontal
      draw_line(ctx, 'black', 0, canvas_size/2, canvas_size, canvas_size/2);
      //vectical
      draw_line(ctx, 'black', canvas_size/2, 0, canvas_size/2, canvas_size);
    }

    function draw_vector(context, color, x, y, width) 
    {
      var center = canvas_size/2;
      draw_arrow(context, color, center, center, center + x*cell_size, center - y*cell_size, width);
    }

    function draw_rect(context, color, x, y, width, height) {
      context.fillStyle = color;
      context.fillRect(x, y, width, height);
    }

    function draw_line(context, color, fromx, fromy, tox, toy, width = 1)
    {
      context.beginPath();

      context.lineWidth = width;
      context.strokeStyle = color;

      context.moveTo(fromx, fromy);
      context.lineTo(tox, toy);
      context.stroke();
    }

    function draw_arrow(context, color, fromx, fromy, tox, toy, width = 1, arrow_size = 20.0) {

      var dx = tox - fromx;
      var dy = toy - fromy;
      var angle = Math.atan2(dy, dx);
      var normal = normalize(dx, dy);

      draw_line(context, color, fromx, fromy, tox - normal.x * (arrow_size -1), toy - normal.y * (arrow_size-1), width);

      context.fillStyle = color;

      var middleX = tox - normal.x * arrow_size;
      var middleY = toy - normal.y * arrow_size;
      draw_arrow_head(context, middleX, middleY, tox, toy);
    }

    function magnitude(x, y) 
    {
      return Math.sqrt(x*x + y*y);
    }

    function normalize(x, y)
    {
      var mag = magnitude(x,y);
      var result = {};
      result.x = x / mag;
      result.y = y / mag;
      return result
    }

    function draw_arrow_head(context, x1, y1, x2, y2) {
      var dx = x2 - x1;
      var dy = y2 - y1;
      context.beginPath();
      context.moveTo(x1 + 0.5 * dy, y1 - 0.5 * dx); // https://dirask.com/posts/jMqM0j
      context.lineTo(x1 - 0.5 * dy, y1 + 0.5 * dx); // https://dirask.com/posts/1GoW61
      context.lineTo(x2, y2);
      context.closePath();
      context.fill();
    }

    function popup() {
       alert("I am an alert box!");
    }
  </script>
	<style>
    h1 {text-align: center; color: white;}
    p {text-align: center;}
    div {text-align: center; color: white;}
    canvas {text-align: center;}
    body {background-color:#262424}

    .red {color:#eda6ad}
    .blue {color:#b7b9e8}
    
    .left
    {
      float: left;
      width: 30%;
    }
    .right
    {
      float: left;
      width: 70%;
    }
	</style>
 </head>
 <body onload="draw();">
  <header>
    <h1>VECTOR VISUALISER</h1>
  </header>

  <section>
    <div class="left">
      <div>
        <label class="red">Vextor X:</label>
        <input type="number" id="X-X" value="5" onchange="draw()">
        <input type="number" id="X-Y" value="7" onchange="draw()"><br>
        <button onclick="normalizeX()">Normalize</button> <button onclick="popup()">?</button>
      </div>
      <br>
      <div>
        <label class="blue">Vextor Y:</label>
        <input type="number" id="Y-X" value="-6" onchange="draw()">
        <input type="number" id="Y-Y" value="2" onchange="draw()"><br>
        <button onclick="normalizeY()">Normalize</button> <button onclick="popup()">?</button>
      </div>
    </div>
    <div class="right">
      <canvas id="canvas" width="600" height="600"></canvas>
    </div>  
  </section>
    </body>
</html>
